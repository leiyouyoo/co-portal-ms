<nz-modal [(nzVisible)]="isVisible" nzTitle="新增订单" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" nzWidth="70%">
  <form class="form-style" nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()" [nzLayout]="'vertical'">
    <div>
      <nz-form-item>
        <nz-form-label nzRequired nzFor="customer">客户</nz-form-label>
        <nz-form-control nzErrorTip="Please input your customer!">
          <!-- <nz-select nzAllowClear id="customer" formControlName="customerId">
            <nz-option *ngFor="let item of customerList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select> -->

          <co-customer-picker style="width: 100%;" formControlName="customerId" [coFilter]="customerFilter"> </co-customer-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzFor="transportationMode" nzRequired>业务类型</nz-form-label>
        <nz-form-control nzErrorTip="Please select your transportationMode!">
          <nz-select nzAllowClear id="transportationMode" formControlName="transportationMode">
            <nz-option *ngFor="let item of transportationModeList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div>
      <nz-form-item>
        <nz-form-label nzFor="contactId">联系人</nz-form-label>
        <nz-form-control nzErrorTip="Please select your contact!">
          <nz-select nzAllowClear id="contactId" formControlName="contactId">
            <nz-option *ngFor="let item of cantactList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzFor="channel" nzRequired>渠道</nz-form-label>
        <nz-form-control nzErrorTip="Please select your channel!">
          <nz-select nzAllowClear id="channel" formControlName="channel">
            <nz-option *ngFor="let item of channelList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div>
      <nz-form-item>
        <nz-form-label nzFor="serviceUserId" nzRequired>业务员</nz-form-label>
        <nz-form-control nzErrorTip="Please select your serviceUser!">
          <nz-select nzAllowClear id="serviceUserId" formControlName="serviceUserId">
            <nz-option *ngFor="let item of serviceUserList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzFor="serviceCompanyId">操作口岸</nz-form-label>
        <nz-form-control>
          <nz-select nzAllowClear id="serviceCompanyId" formControlName="serviceCompanyId">
            <nz-option *ngFor="let item of serviceCompanyList" [nzValue]="item.id" [nzLabel]="item.displayNameLocalization"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div>
      <nz-form-item>
        <nz-form-label nzFor="fbaPickUpMethodType">交货方式</nz-form-label>
        <nz-form-control>
          <nz-radio-group formControlName="fbaPickUpMethodType">
            <label nz-radio [nzValue]="1">自送货</label>
            <label nz-radio [nzValue]="2">由CITYOCEAN上门提货</label>
          </nz-radio-group>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzFor="destinationWarehouseId">交货仓库</nz-form-label>
        <nz-form-control>
          <nz-select nzAllowClear id="gender" formControlName="destinationWarehouseId">
            <nz-option *ngFor="let item of destinationWarehouseList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div>
      <nz-form-item>
        <nz-form-label nzFor="agentCustomerId">承运人</nz-form-label>
        <nz-form-control>
          <nz-select nzAllowClear id="agentCustomerId" formControlName="agentCustomerId">
            <nz-option *ngFor="let item of agentCustomerList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzFor="gender">国家</nz-form-label>
        <input nz-input [(ngModel)]="country" formControlName="country" />
      </nz-form-item>
    </div>
    <div>
      <nz-form-item>
        <nz-form-label nzFor="transferNo">SO号</nz-form-label>
        <nz-form-control>
          <input nz-input formControlName="transferNo" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label nzFor="deliveryDate">预估交货时间</nz-form-label>
        <nz-form-control>
          <datetime-range-picker formControlName="deliveryDate"></datetime-range-picker>
        </nz-form-control>
      </nz-form-item>
    </div>
    <div>
      <nz-form-item>
        <nz-form-label nzFor="commodity" nzRequired>品名</nz-form-label>
        <nz-form-control nzErrorTip="Please input your commodity!">
          <nz-select nzAllowClear id="agentCustomerId" formControlName="commodity">
            <nz-option *ngFor="let item of commodityList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>
  </form>
  <nz-divider></nz-divider>
  <nz-alert nzType="success" nzMessage="Total ：件数(CTN) 24    重量(KG) 747.7    体积(CBM)4.15"></nz-alert>

  <div class="address-item" *ngFor="let item of addressList; let i = index">
    <div class="address-input">
      <span
        >送货地址<span *ngIf="i !== 0">{{ i + 1 }}</span></span
      >
      <nz-select nzAllowClear [(ngModel)]="addressList.address">
        <nz-option *ngFor="let item of addressItemList" [nzValue]="item.id" [nzLabel]="item.name"></nz-option>
      </nz-select>
      <button nz-button nzType="primary" (click)="addAddress(i)">新增地址</button>
      <button nz-button nzType="default" (click)="deleteAddress(i)" *ngIf="addressList.length > 1 && i > 0">删除</button>
    </div>
    <nz-table nzShowPagination="false" [nzData]="addressList[i].tableList" nzTableLayout="fixed">
      <thead>
        <tr>
          <th *ngFor="let column of listOfColumn">{{ column.title }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of addressList[i].tableList; let childIndex = index">
          <td><input nz-input [(ngModel)]="data.name" /></td>
          <td><input nz-input [(ngModel)]="data.chinese" /></td>
          <td><input nz-input [(ngModel)]="data.math" /></td>
          <td><input nz-input [(ngModel)]="data.english" /></td>
          <td><input nz-input [(ngModel)]="data.math" /></td>
          <td>
            <span class="iconfont icon-Delete" (click)="deleteLine(i, childIndex)"></span>
          </td>
        </tr>
        <tr>
          <td colspan="6" nzAlign="center" class="tr-center" (click)="addLine(i)">
            <i nz-icon nzIconfont="iconadd" class="alain-pro__menu-item-icon"></i>
          </td>
        </tr>
      </tbody>
    </nz-table>
  </div>
</nz-modal>
